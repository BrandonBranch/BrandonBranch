<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="brandon_boothe" name="owner_name">

    <title>Document</title>
    <script type="text/javascript">

        
        (function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://cdn.branch.io/branch-latest.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode trackCommerceEvent logEvent disableTracking getBrowserFingerprintId crossPlatformIds lastAttributedTouchData".split(" "), 0);
    
        branch.init('key_live_pfXRGHm8v4dqw6tUDF2e3ekctxlbGz8U', 
        {
            "metadata": {
                "campaign": "BBSite"
//                "$campaign": $('meta[name="owner_name"]').attr('content')

            }
        },
        
        function(err, data) {
            // callback to handle err or data
            
        });


        function makeLink () {
            var linkData = {
                "desktop_url": "https://brandonbranch.github.io/BrandonBranch/"
            };

            branch.link(linkData, function(err, link) {
                if (err == null) {
                    document.getElementById('generatedLink').value = link;
                } else {
                    document.getElementById('generatedLink').value = err;
                }
            });
        };

        function trackRegistration() {
            var event_and_custom_data = {
            "description": "User Completed registration",
            "age": "25",
            "registration_id": "12345"
            };

        var customer_event_alias = "brandon_boothe";

        branch.logEvent(
            "COMPLETE_REGISTRATION",
            event_and_custom_data,
            customer_event_alias,
            function(err) { 
                console.log("Completed Registration");
                console.log(customer_event_alias);
                console.log(event_and_custom_data); }
            );
        };

        function trackPage() {
            var event_and_custom_data = {
                "description": "User Opened Content Page",
                "age": "25",
                "registration_id": "12345"
            };

            var content_items =
                {
                    "$content_schema": "CONTENT_EVENT",
                     "$og_title": "Contact Page",
                    "$og_description": "Contact Page Opened",
                    "$custom_fields": {"foo1":"bar1","foo2":"bar2"}
                };

            var customer_event_alias = "brandon_boothe";

            branch.logEvent(
            "VIEW_CONTENT_PAGE",
            event_and_custom_data,
            content_items,
            customer_event_alias,
            function(err) { 
                console.log("User Viewed Content Page");
                console.log(customer_event_alias);
                console.log(content_items);
                console.log(event_and_custom_data); }
            );
        };

        

    </script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>BrandonBranch</h1>
    <a href="/BrandonBranch/contact.html" onclick="trackPage()">Contact</a>
    <p>Some Text</p>
    <p>Some More Text</p>
    <p>Some More Text Again</p>
    <p>Some More More Text Again</p>
    <p>MakeLink Should Work</p>
    
    <section>
        <div class="row col-lg-8 col-lg-offset-2">
            <div class="group">
             <h4>Make a Link</h4>
              <button class="btn btn-info" onclick="makeLink()">Link</button>
            </div>
            <br>
            <textarea class="form-control" style="height:40px; margin-bottom:5%;" id="generatedLink" type="text"></textarea>
            <h4>Track Registration</h4>
              <button class="btn btn-info" onclick="trackRegistration()">Link</button>
            </div>
            <br>
          </div>
    </section>

</body>
</html>

